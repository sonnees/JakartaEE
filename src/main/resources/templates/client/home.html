<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home Client</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <style>
        .active{
            background: #607aff;
        }
    </style>
</head>
<body>
    <div th:replace="~{/client/menu.html}"></div>
    <div class="container" style="margin-top: 70px">
        <form id="myForm" method="get" action="/home/by">
            <table class="table">
                <tr>
                    <th>Img</th>
                    <th>Tên sản phẩm</th>
                    <th>Giá</th>
                    <th>Trạng thái</th>
                    <th>Đơn vị</th>
                    <th>Giá cập nhật ngày</th>
                    <th>Method</th>
                </tr>
                <tr th:each="p:${products}">
                    <td>
                        <img style="width: 60px; height: 40px" th:src="${p.path}" alt="">
                    </td>
                    <td th:text="${p.name}"></td>
                    <td th:id="'price-'+${p.id}" th:text="${#numbers.formatDecimal(p.price,0,0)}"></td>
                    <td th:text="${p.status== T(vn.edu.iuh.fit.backend.enums.ProductStatus).ACTIVE ? 'Còn hàng' : 'Tạm hết hàng'}"></td>
                    <td th:text="${p.unit}"></td>
                    <td th:text="${p.price_date_time}"></td>
                    <td th:if="${p.status==T(vn.edu.iuh.fit.backend.enums.ProductStatus).ACTIVE}">
                        <button type="button" class="btn" th:attr="onclick=|submitActionAddToCart('${p.id}','${p.price}','${p.path}')|" >
                            <i class="fas fa-cart-plus" ></i>
                        </button>
                    </td>
                </tr>
            </table>
            <div style="display: flex; justify-content: center; align-items: center">
                <button type="submit" name="page" th:each="l:${pages}" th:value="${l} - 1" th:text="${l}" style="width: 40px; border-radius: 3px; text-align: center; margin-left: 3px" th:class="${curPage==l}?'active btn btn-success':'btn btn-success'"></button>
            </div>
        </form>
    </div>



    <div style="height: 200px"></div>

    <script>
        function submitActionAddToCart(id,price,img){
            let elementById = document.getElementById("myForm");
            elementById.action = "/home/add?id="+id+"&price="+price+"&img="+img;
            elementById.method="post"
            elementById.submit();
        }
        function submitActionViewCart(){
            let elementById = document.getElementById("myForm");
            elementById.submit();
        }
    </script>
</body>

</html>